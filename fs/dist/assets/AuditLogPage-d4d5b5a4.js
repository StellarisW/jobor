import{a as j,e as O,t as R,f as v,d as w,g as D,u as P,i as T,ah as C,j as F,h as p,ak as z,C as x,D as f,H as k,m as H,X as E,T as g,G as m,K as d,$ as L,V as $,a0 as q,U as A,E as I,aj as J,_ as U,aS as G,a7 as K,al as X}from "./index-18c4e01a.js";import{u as Q,N as Y}from "./Icon-c53b6757.js";import{_ as Z}from "./_plugin-vue_export-helper-c27b6911.js";import{u as ee,_ as te}from "./useTableData-51dd21fe.js";import{b as oe}from "./Dropdown-a04ac224.js";import"./Forward-b27fe24b.js";const re={headerFontSize1:"30px",headerFontSize2:"22px",headerFontSize3:"18px",headerFontSize4:"16px",headerFontSize5:"16px",headerFontSize6:"16px",headerMargin1:"28px 0 20px 0",headerMargin2:"28px 0 20px 0",headerMargin3:"28px 0 20px 0",headerMargin4:"28px 0 18px 0",headerMargin5:"28px 0 18px 0",headerMargin6:"28px 0 18px 0",headerPrefixWidth1:"16px",headerPrefixWidth2:"16px",headerPrefixWidth3:"12px",headerPrefixWidth4:"12px",headerPrefixWidth5:"12px",headerPrefixWidth6:"12px",headerBarWidth1:"4px",headerBarWidth2:"4px",headerBarWidth3:"3px",headerBarWidth4:"3px",headerBarWidth5:"3px",headerBarWidth6:"3px",pMargin:"16px 0 16px 0",liMargin:".25em 0 0 0",olPadding:"0 0 0 2em",ulPadding:"0 0 0 2em"},ae= e=>{const{primaryColor:t,textColor2:o,borderColor:n,lineHeight:r,fontSize:a,borderRadiusSmall:s,dividerColor:h,fontWeightStrong:i,textColor1:l,textColor3:c,infoColor:u,warningColor:b,errorColor:y,successColor:_,codeColor:S}=e;return Object.assign(Object.assign({},re),{aTextColor:t,blockquoteTextColor:o,blockquotePrefixColor:n,blockquoteLineHeight:r,blockquoteFontSize:a,codeBorderRadius:s,liTextColor:o,liLineHeight:r,liFontSize:a,hrColor:h,headerFontWeight:i,headerTextColor:l,pTextColor:o,pTextColor1Depth:l,pTextColor2Depth:o,pTextColor3Depth:c,pLineHeight:r,pFontSize:a,headerBarColor:t,headerBarColorPrimary:t,headerBarColorInfo:u,headerBarColorError:y,headerBarColorWarning:b,headerBarColorSuccess:_,textColor:o,textColor1Depth:l,textColor2Depth:o,textColor3Depth:c,textColorPrimary:t,textColorInfo:u,textColorSuccess:_,textColorWarning:b,textColorError:y,codeTextColor:o,codeColor:S,codeBorder:"1px solid #0000"})},ne={name:"Typography",common:j,self:ae},N=ne,ie=O("h",`
 font-size: var(--n-font-size);
 font-weight: var(--n-font-weight);
 margin: var(--n-margin);
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[R("&:first-child",{marginTop:0}),v("prefix-bar",{position:"relative",paddingLeft:"var(--n-prefix-width)"},[v("align-text",{paddingLeft:0},[R("&::before",{left:"calc(-1 * var(--n-prefix-width))"})]),R("&::before",`
 content: "";
 width: var(--n-bar-width);
 border-radius: calc(var(--n-bar-width) / 2);
 transition: background-color .3s var(--n-bezier);
 left: 0;
 top: 0;
 bottom: 0;
 position: absolute;
 `),R("&::before",{backgroundColor:"var(--n-bar-color)"})])]),se=Object.assign(Object.assign({},P.props),{type:{type:String,default:"default"},prefix:String,alignText:Boolean}),B=e=>w({name:`H${e}`,props:se,setup(t){const{mergedClsPrefixRef:o,inlineThemeDisabled:n}=D(t),r=P("Typography","-h",ie,N,t,o),a=T(()=>{const{type:h}=t,{common:{cubicBezierEaseInOut:i},self:{headerFontWeight:l,headerTextColor:c,[C("headerPrefixWidth",e)]:u,[C("headerFontSize",e)]:b,[C("headerMargin",e)]:y,[C("headerBarWidth",e)]:_,[C("headerBarColor",h)]:S}}=r.value;return{"--n-bezier":i,"--n-font-size":b,"--n-margin":y,"--n-bar-color":S,"--n-bar-width":_,"--n-font-weight":l,"--n-text-color":c,"--n-prefix-width":u}}),s=n?F(`h${e}`,T(()=>t.type[0]),a,t):void 0;return{mergedClsPrefix:o,cssVars:n?void 0:a,themeClass:s==null?void 0:s.themeClass,onRender:s==null?void 0:s.onRender}},render(){var t;const{prefix:o,alignText:n,mergedClsPrefix:r,cssVars:a,$slots:s}=this;return(t=this.onRender)===null||t===void 0||t.call(this),p(`h${e}`,{class:[`${r}-h`,`${r}-h${e}`,this.themeClass,{[`${r}-h--prefix-bar`]:o,[`${r}-h--align-text`]:n}],style:a},s)}});B("1");B("2");const M=B("3");B("4");B("5");B("6");const le=O("text",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[v("strong",`
 font-weight: var(--n-font-weight-strong);
 `),v("italic",{fontStyle:"italic"}),v("underline",{textDecoration:"underline"}),v("code",`
 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 `)]),de=Object.assign(Object.assign({},P.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),W=w({name:"Text",props:de,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:o}=D(e),n=P("Typography","-text",le,N,e,t),r=T(()=>{const{depth:s,type:h}=e,i=h==="default"?s===void 0?"textColor":`textColor${s}Depth`:C("textColor",h),{common:{fontWeightStrong:l,fontFamilyMono:c,cubicBezierEaseInOut:u},self:{codeTextColor:b,codeBorderRadius:y,codeColor:_,codeBorder:S,[i]:V}}=n.value;return{"--n-bezier":u,"--n-text-color":V,"--n-font-weight-strong":l,"--n-font-famliy-mono":c,"--n-code-border-radius":y,"--n-code-text-color":b,"--n-code-color":_,"--n-code-border":S}}),a=o?F("text",T(()=>`${e.type[0]}${e.depth||""}`),r,e):void 0;return{mergedClsPrefix:t,compitableTag:Q(e,["as","tag"]),cssVars:o?void 0:r,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){var e,t,o;const{mergedClsPrefix:n}=this;(e=this.onRender)===null||e===void 0||e.call(this);const r=[`${n}-text`,this.themeClass,{[`${n}-text--code`]:this.code,[`${n}-text--delete`]:this.delete,[`${n}-text--strong`]:this.strong,[`${n}-text--italic`]:this.italic,[`${n}-text--underline`]:this.underline}],a=(o=(t=this.$slots).default)===null||o===void 0?void 0:o.call(t);return this.code?p("code",{class:r,style:this.cssVars},this.delete?p("del",null,a):a):this.delete?p("del",{class:r,style:this.cssVars},a):p(this.compitableTag||"span",{class:r,style:this.cssVars},a)}}),ce={getAuditLogList(e){return z("GET /jobor/audit-log",{params:e})},createAuditLog(e){return z("POST /jobor/audit-log",{data:e})},editAuditLog(e,t){return z(["PUT /jobor/audit-log/:id",e],{data:t})},delAuditLog(e){return z(["DELETE /jobor/audit-log/:id",e])},getAllAuditLog(){return z("GET /jobor/audit-logs")}},he={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ue=k("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z",fill:"currentColor"},null,-1),pe=[ue],xe=w({name:"FileTextOutlined",render:function(t,o){return x(),f("svg",he,pe)}}),fe={class:"main"},ge={class:"code-box"},me={key:0},be={key:1},ye={class:"code-box"},_e={key:0},Ce={key:1},ve=w({__name:"RequestModal",props:{body:null,resp_body:null},setup(e){const t=e,o=H(!1);function n(){o.value=!0}const r=T(()=>{try{return JSON.parse(t.body),!0}catch{return!1}}),a=T(()=>{try{return JSON.parse(t.resp_body),!0}catch{return!1}});return(s,h)=>(x(),f("div",null,[k("span",{onClick:n},[E(s.$slots,"default",{},void 0,!0)]),g(d(q),{show:o.value,"onUpdate:show":h[0]||(h[0]=i=>o.value=i),title:"请求历史",preset:"card","auto-focus":!1,"w-250":""},{default:m(()=>[k("div",fe,[k("div",ge,[g(d(M),{prefix:"bar","align-text":""},{default:m(()=>[g(d(W),{type:"primary"},{default:m(()=>[L(" 请求体内容 (Request) ")]),_:1})]),_:1}),d(r)?(x(),f("pre",me,$(JSON.stringify(JSON.parse(t.body),null,2)),1)):(x(),f("div",be,$(t.body),1))]),k("div",ye,[g(d(M),{prefix:"bar","align-text":""},{default:m(()=>[g(d(W),{type:"primary"},{default:m(()=>[L(" 响应体内容 (Response) ")]),_:1})]),_:1}),d(a)?(x(),f("pre",_e,$(JSON.stringify(JSON.parse(t.resp_body),null,2)),1)):(x(),f("div",Ce,$(t.resp_body),1))])])]),_:1},8,["show"])]))}});const Te=Z(ve,[["__scopeId","data-v-d43398d7"]]),we=w({__name:"DetailButton",props:{btnText:{default:"详情"},showIco:{type:Boolean},showTxt:{type:Boolean}},setup(e){const t=e,{btnText:o}=A(t),n=H(!1);return(r,a)=>(x(),I(d(U),J({size:"small",loading:n.value,type:"primary",quaternary:""},r.$attrs),{icon:m(()=>[g(d(Y),{component:d(xe)},null,8,["component"])]),default:m(()=>[L(" "+$(d(o)),1)]),_:1},16,["loading"]))}}),Pe=w({__name:"AuditLogPage",setup(e){const{dataSource:t,loading:o,refresh:n,tableFilter:r,total:a,pagination:s}=ee(ce.getAuditLogList),h=G([{title:"所属",key:"dom",width:"100"},{title:"操作人",key:"nickname",width:"100",resizable:!0},{title:"动作",key:"action",width:"120",resizable:!0,ellipsis:{tooltip:!0}},{title:"来源",key:"user_ip",width:"160",resizable:!0},{title:"Handler",key:"handler",width:"20%",resizable:!0,ellipsis:{tooltip:!0}},{title:"请求方法",key:"method",width:"80",render:i=>{var u;const l=(u=i.method)==null?void 0:u.toUpperCase(),c=X[l];return p("div",{style:{color:c,fontWeight:"bolder"}},{default:()=>i.method})}},{title:"httpCode",key:"http_code",width:"120"},{title:"关联ID",key:"obj_id",width:"80"},{title:"结果",key:"status",align:"center",width:"60",render:i=>{let l=String(i.status),c="primary";return i.status===0?(l="错误",c="error"):i.status===1?(l="成功",c="success"):i.status===2?(l="禁止",c="warning"):i.status===3&&(l="异常",c="error"),p(oe,{bordered:!1,type:c},{default:()=>l})}},{title:"操作时间",key:"updated_at",width:"180"},{title:"操作",key:"action-row",width:"120",fixed:"right",render:i=>p(Te,{resp_body:i.resp_body,body:i.body},{default:()=>p(we,{btnText:"请求信息"})})}]);return(i,l)=>(x(),f("div",null,[g(te,{"table-filter":d(r),"onUpdate:tableFilter":l[0]||(l[0]=c=>K(r)?r.value=c:null),data:d(t),loading:d(o),columns:h,total:d(a),pagination:d(s),"search-key":"user","search-place-holder":"请输入用户名",onRefresh:d(n)},null,8,["table-filter","data","loading","columns","total","pagination","onRefresh"])]))}});export{Pe as default};
