(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-542f4ecc"],{4973:function(e,s,t){"use strict";t("afa0")},afa0:function(e,s,t){},cdab:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"user-profile"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"min-width":"200px"},attrs:{span:6,xs:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("个人信息")])]),e._v(" "),a("div",[a("div",{staticClass:"text-center"},[a("img",{staticClass:"user-avatar",staticStyle:{"border-radius":"50%"},attrs:{src:t("4d8e")}})]),e._v(" "),a("ul",{staticClass:"list-group list-group-striped",staticStyle:{"padding-left":"0","list-style":"none"}},[a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"user"}}),e._v(" 用户名称\n                "),a("div",{staticClass:"pull-right"},[e._v(e._s(e.user.username)+"aa")])],1),e._v(" "),a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"phone"}}),e._v(" 手机号码\n                "),a("div",{staticClass:"pull-right"},[e._v(e._s(e.user.phone))])],1),e._v(" "),a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"email"}}),e._v(" 用户邮箱\n                "),a("div",{staticClass:"pull-right"},[e._v(e._s(e.user.email))])],1),e._v(" "),a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"peoples"}}),e._v(" 用户类型\n                "),"local"===e.user.user_type?a("div",{staticClass:"pull-right"},[e._v("本地")]):"ldap"===e.user.user_type?a("div",{staticClass:"pull-right"},[e._v("LDAP")]):a("div",{staticClass:"pull-right"},[e._v("其他")])],1),e._v(" "),a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"date"}}),e._v(" 创建日期\n                "),a("div",{staticClass:"pull-right"},[e._v(e._s(e.user.ctime))])],1)])])])],1),e._v(" "),a("el-col",{attrs:{span:18,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("基本资料")])]),e._v(" "),a("el-tabs",{model:{value:e.activeTab,callback:function(s){e.activeTab=s},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"基本资料",name:"userinfo"}},[a("userProfileChange",{attrs:{user:e.user,url:e.url}})],1),e._v(" "),"local"===e.user.user_type?a("el-tab-pane",{attrs:{label:"修改密码",name:"resetPwd"}},[a("userPassChange",{attrs:{user:e.user,url:e.url}})],1):e._e()],1)],1)],1)],1)],1)},r=[],i=(t("96cf"),t("3b8d")),l=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("el-form",{ref:"RowData",attrs:{"label-width":"100px",model:e.user,size:"small"}},[t("el-form-item",{attrs:{label:"显示名",prop:"nickname",rules:[{required:!0,message:"请输入显示名",trigger:"blur"}]}},[t("el-input",{staticStyle:{width:"350px"},model:{value:e.user.nickname,callback:function(s){e.$set(e.user,"nickname",s)},expression:"user.nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"用户名",prop:"username",rules:[{required:!0,message:"请输入用户名，如：zhansan",trigger:"blur"}]}},[t("el-input",{staticStyle:{width:"350px"},attrs:{disabled:""},model:{value:e.user.username,callback:function(s){e.$set(e.user,"username",s)},expression:"user.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱",prop:"email",rules:[{required:!0,message:"请输入Email",trigger:"blur"},{pattern:/^[a-z0-9]+([._\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,message:"请输入有效的邮箱",trigger:"blur"}]}},[t("el-input",{staticStyle:{width:"350px"},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号",prop:"phone",rules:[{pattern:/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,message:"手机格式不对",trigger:"blur"}]}},[t("el-input",{staticStyle:{width:"350px"},model:{value:e.user.phone,callback:function(s){e.$set(e.user,"phone",s)},expression:"user.phone"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"warning",plain:""},on:{click:e.update}},[e._v("修改")]),e._v(" "),t("el-button",{on:{click:e.goBack}},[e._v("返回")])],1)],1)],1)},o=[],n={name:"user-profile-change",props:{user:{default:{id:"",username:""}},url:{default:""},func:{Type:Function}},data:function(){return{}},methods:{goBack:function(){this.$router.go(-1)},update:function(){var e=this;this.$refs.RowData.validate((function(s){if(s){var t=JSON.parse(JSON.stringify(e.user)),a=e.url+"-profile/"+t.id;e.$store.dispatch("common/CreateUpdate",{url:a,method:"PUT",data:t}).then((function(s){e.$message.success(s.data.message),e.func&&e.func()})).catch((function(e){}))}else e.$message.warning("请输入完整数据")}))}}},u=n,c=t("2877"),d=Object(c["a"])(u,l,o,!1,null,"6a680a97",null),p=d.exports,m=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("el-form",{ref:"userPass",attrs:{"label-width":"100px",model:e.setPassword,size:"small"}},[t("el-form-item",{attrs:{hidden:""}},[t("el-input",{model:{value:e.setPassword.id,callback:function(s){e.$set(e.setPassword,"id",s)},expression:"setPassword.id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"旧密码",prop:"old_password",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]}},[t("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",type:"password"},model:{value:e.setPassword.old_password,callback:function(s){e.$set(e.setPassword,"old_password",s)},expression:"setPassword.old_password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"新密码",prop:"password",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]}},[t("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",type:"password"},model:{value:e.setPassword.password,callback:function(s){e.$set(e.setPassword,"password",s)},expression:"setPassword.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认新密码",prop:"re_password",rules:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:e.checkPass,trigger:"blur"}]}},[t("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",type:"password"},model:{value:e.setPassword.re_password,callback:function(s){e.$set(e.setPassword,"re_password",s)},expression:"setPassword.re_password"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"warning",plain:""},on:{click:e.update}},[e._v("修改")]),e._v(" "),t("el-button",{on:{click:e.goBack}},[e._v("返回")])],1)],1)],1)},f=[],v={name:"user-pass-change",props:{user:{default:{id:"",username:""}},url:{default:""},func:{Type:Function}},data:function(){return{setPassword:{id:"",old_password:"",password:"",re_password:""}}},methods:{checkPass:function(e,s,t){""===s?t(new Error("请再次输入密码")):s!==this.setPassword.password?t(new Error("两次输入密码不一致!")):t()},showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"},goBack:function(){this.$router.go(-1)},update:function(){var e=this;this.$refs.userPass.validate((function(s){if(s){var t=JSON.parse(JSON.stringify(e.setPassword)),a=e.url+"-pass/"+e.user.id;e.$store.dispatch("common/CreateUpdate",{url:a,method:"PUT",data:t}).then((function(s){e.$message.success(s.data.message),e.func&&e.func()})).catch((function(e){}))}}))}}},h=v,g=Object(c["a"])(h,m,f,!1,null,"2faeb0f2",null),w=g.exports,_={name:"Profile",components:{userProfileChange:p,userPassChange:w},data:function(){return{url:this.$store.state.urls.user_url,user:{},roleGroup:{},postGroup:{},deptGroup:{},activeTab:"userinfo",roleIds:void 0,postIds:void 0,roleName:void 0,postName:void 0,dept:{},deptName:void 0}},created:function(){this.user.id=this.$store.state.user.userId,this.getUser()},methods:{getUser:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var s,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=this.url+"/"+this.user.id,e.next=4,this.$store.dispatch("common/Query",{url:s,data:{}});case 4:t=e.sent,this.user=t.data.data,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:return e.prev=10,e.finish(10);case 12:case"end":return e.stop()}}),e,this,[[0,8,10,12]])})));function s(){return e.apply(this,arguments)}return s}()}},b=_,x=(t("4973"),Object(c["a"])(b,a,r,!1,null,"6d6d5b7a",null));s["default"]=x.exports}}]);